Still in development.
Project of social model engine, based on theory of Истратов Виктор Александрович (https://doi.org/10.31063/AlterEconomics/2024.21-2.11) veeque@mail.ru.

# Моделирование жизнедеятельности агентов

Проект представляет собой симуляцию жизни людей (агентов) в городе с системой целей и действий. Агенты имеют характеристики (возраст, деньги, работа), социальные связи и стремятся достигать глобальных и локальных целей через выполнение действий.

## Функционал

- Моделирование почасовой деятельности агентов
- Система иерархических целей (глобальные → локальные → действия)
- Экономическая система (зарплаты, расходы, передача денег)
- Социальные связи (семья, друзья, родственники)
- Система потребностей и всплесков (splashes)
- Рабочий механизм (вакансии, трудоустройство)
- Старение и наследование имущества

## Сборка проекта

### Требования
- Компилятор C++ с поддержкой C++11
- Библиотека OpenMP
- Make (опционально)

### Установка компилятора для Windows

Для сборки под Windows необходимо установить MinGW-w64:

1. Перейдите на страницу загрузки MinGW-w64: https://www.mingw-w64.org/downloads/
2. Скачайте установщик (например, MingW-W64-builds) или архивную версию
3. Запустите установщик и выберите:
   - Version: последняя доступная версия
   - Architecture: x86_64
   - Threads: posix
   - Exception: seh
   - Build revision: 0
4. Укажите путь установки (рекомендуется: `C:\mingw64`)
5. Добавьте путь к компилятору в переменную окружения PATH:
   - Нажмите Win + R, введите `sysdm.cpl` и нажмите Enter
   - Перейдите на вкладку "Дополнительно" → "Переменные среды"
   - В разделе "Системные переменные" найдите переменную Path и отредактируйте ее
   - Добавьте путь к папке bin компилятора (например, `C:\mingw64\bin`)
6. Откройте новое окно командной строки и проверьте установку:
   ```
   g++ --version
   ```

### Сборка под Linux
```bash
g++ main.cpp -fopenmp -O3 -march=native -mtune=native -Wall -o model.linux
```

### Сборка под Windows
```bash
g++ -fopenmp -O3 -Wall main.cpp -static -o model.exe
```

### Использование Makefile
```bash
make  # Соберет обе версии (Linux и Windows)
```

## Запуск

После сборки выполните:
```bash
./model.linux  # для Linux
model.exe      # для Windows
```

## Конфигурационные файлы

Проект использует три конфигурационных файла, которые должны находиться в той же директории, что и исполняемый файл:

### 1. actions.ini
Формат: 
```
навание_действия цена время_выполнения [теги] [правила] [предметы] [бонус]
```
Пример:
```
найти_работу 0 1 карьера $cash>1000 @образование +5000
```

### 2. local.ini
Формат:
```
название_локальной_цели тег1 тег2 ...
```
Пример:
```
получить_образование образование
```

### 3. global.ini
Формат:
```
название_глобальной_цели мощность тег1 тег2 ...
```
Пример:
```
стать_профессионалом 1.0 образование карьера
```

## Структура проекта

- `methods.hpp` - Вспомогательные методы и классы
- `myrand.hpp` - Генерация случайных чисел
- `main.cpp` - Основная логика симуляции
- `Makefile` - Файл для сборки

## Ключевые классы

- `Human` - агент с характеристиками и поведением
- `Action` - конкретное действие, которое может выполнить агент
- `LocalTarget` - локальная цель (состоит из действий)
- `GlobalTarget` - глобальная цель (состоит из локальных целей)
- `Location` - локация с job-ами и агентами
- `Vacancy` и `Job` - система работы и вакансий

## Особенности реализации

- Использование OpenMP для параллельной генерации случайных чисел
- Иерархическая система принятия решений
- Механизм наследования и распределения ресурсов
- Система проверки условий выполнения действий
- Почасовая симуляция с выводом статистики

Проект демонстрирует сложное поведение агентов, striving для достижения целей в условиях ограниченных ресурсов и социальных связей.

## Решение возможных проблем

1. Если при сборке возникает ошибка "fopenmp не поддерживается", убедитесь, что используется версия MinGW-w64 с поддержкой OpenMP
2. При запуске на Windows может потребоваться установка библиотеки libgomp-1.dll (входит в состав MinGW-w64)
3. Для статической линковки (флаг -static) убедитесь, что все необходимые библиотеки доступны